<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Millennium Timber Roof ERP - Enhanced Quoting System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Roboto Font (Millennium Roofing Primary Typeface) -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="styles.css?v=2025-08-09-force" rel="stylesheet">
    <link href="millennium-brand.css?v=2025-08-09-force" rel="stylesheet">
    
    <!-- System Defaults (Load First) -->
    <script src="system/defaults.js"></script>
    
    <!-- Google Maps API -->
    <script>
        function initGoogleMaps() {
            window.googleMapsLoaded = true;
            console.log('Google Maps API loaded successfully');
            // Trigger map initialization for any waiting components
            if (window.mapInitQueue) {
                window.mapInitQueue.forEach(callback => callback());
                window.mapInitQueue = [];
            }
        }
    </script>
    

</head>
<body style="background-color: #E6E6E6 !important; font-family: 'Roboto', sans-serif !important; color: #231f20 !important;">
    <nav class="navbar navbar-expand-lg navbar-dark millennium-navbar fixed-top" style="background: linear-gradient(135deg, #59AAD5 0%, #54C3D6 100%) !important; background-color: #59AAD5 !important;">
        <div class="container-fluid">
            <a class="navbar-brand millennium-brand" href="#">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 100'%3E%3Cpath d='M20,80 L50,20 L80,80 M50,20 L80,20 L100,50' fill='%2354C3D6'/%3E%3Cpath d='M100,80 L130,20 L160,80 M130,20 L160,20 L180,50' fill='%23464746'/%3E%3Ctext x='20' y='95' font-family='Roboto' font-weight='700' font-size='24' fill='%23ffffff'%3EMILLENNIUM%3C/text%3E%3C/svg%3E" 
                     alt="Millennium Roofing" height="40" class="me-2">
                <span class="millennium-brand-text" style="color: #ffffff !important; font-weight: 500;">ERP System</span>
            </a>
            
            <!-- Global Search -->
            <div class="navbar-search flex-grow-1 mx-4">
                <div class="position-relative">
                    <input type="text" class="form-control bg-light border-0" 
                           id="global-search" placeholder="Search customers, projects, orders..." 
                           style="padding-left: 40px;">
                    <i class="fas fa-search position-absolute" 
                       style="left: 12px; top: 50%; transform: translateY(-50%); color: #6c757d;"></i>
                </div>
                <div id="search-results" class="dropdown-menu w-100" style="max-height: 400px; overflow-y: auto;"></div>
            </div>
            
            <div class="navbar-nav">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-user"></i> <span id="current-user">Loading...</span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#"><i class="fas fa-user-circle"></i> Profile</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                    </ul>
                </div>
                <button class="btn btn-link nav-link" id="settings-btn" title="Settings">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- CACHE BUSTER TEST - If you see this, changes are loading -->
    <div style="position: fixed; top: 10px; right: 10px; background: red; color: white; padding: 10px; z-index: 9999; border-radius: 5px;">
        <strong>CHANGES LOADED âœ“</strong><br>
        Cache-bust: 2025-08-09
    </div>
    
    <div class="container-fluid" style="margin-top: 80px;">
        <div class="row">
            <!-- Left Sidebar Navigation -->
            <div class="col-md-3 col-lg-3 col-xl-2">
                <div class="sidebar-container">
                    <!-- Pinned Section -->
                    <div class="card mb-3 bc-card">
                        <div class="card-header bg-light bc-collapsible-header" data-bs-toggle="collapse" data-bs-target="#pinnedCollapse" role="button" style="background: linear-gradient(135deg, #E6E6E6 0%, #b3b3b3 100%) !important; color: #231f20 !important; font-weight: 500 !important;">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-thumbtack me-2 text-primary"></i>
                                <h6 class="mb-0 flex-grow-1">Pinned</h6>
                                <i class="fas fa-chevron-down bc-collapse-icon"></i>
                            </div>
                        </div>
                        <div class="collapse show" id="pinnedCollapse">
                            <div class="list-group list-group-flush" id="pinned-items">
                                <div class="text-center text-muted p-2 small">No pinned items</div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Section -->  
                    <div class="card mb-3 bc-card">
                        <div class="card-header bg-light bc-collapsible-header" data-bs-toggle="collapse" data-bs-target="#recentCollapse" role="button" style="background: linear-gradient(135deg, #E6E6E6 0%, #b3b3b3 100%) !important; color: #231f20 !important; font-weight: 500 !important;">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-clock me-2 text-success"></i>
                                <h6 class="mb-0 flex-grow-1">Recent</h6>
                                <i class="fas fa-chevron-down bc-collapse-icon"></i>
                            </div>
                        </div>
                        <div class="collapse show" id="recentCollapse">
                            <div class="list-group list-group-flush" id="recent-items">
                                <div class="text-center text-muted p-2 small">No recent activity</div>
                            </div>
                        </div>
                    </div>

                    <!-- Home - Main Navigation -->
                    <div class="card">
                        <div class="card-header bg-primary text-white" style="background: linear-gradient(135deg, #59AAD5 0%, #54C3D6 100%) !important; color: #ffffff !important; font-weight: 600 !important;">
                            <h6 class="mb-0"><i class="fas fa-home"></i> Home</h6>
                        </div>
                        <div class="accordion accordion-flush" id="navigation-accordion">
                            <!-- Dashboard -->
                            <div class="accordion-item">
                                <div class="accordion-header">
                                    <a href="#my-dashboard" class="list-group-item list-group-item-action active border-0" data-tab="my-dashboard">
                                        <i class="fas fa-chart-line"></i> My Dashboard
                                    </a>
                                </div>
                            </div>
                            
                            <!-- Activities -->
                            <div class="accordion-item">
                                <div class="accordion-header">
                                    <a href="#my-activities" class="list-group-item list-group-item-action border-0" data-tab="my-activities">
                                        <i class="fas fa-tasks"></i> My Activities
                                    </a>
                                </div>
                            </div>

                            <!-- General Module -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#general-module">
                                        <i class="fas fa-users me-2"></i> General
                                    </button>
                                </h2>
                                <div id="general-module" class="accordion-collapse collapse" data-bs-parent="#navigation-accordion">
                                    <div class="accordion-body p-0">
                                        <a href="#customers" class="list-group-item list-group-item-action border-0" data-tab="customers" onclick="launchModularSystem(); return false;">
                                            <i class="fas fa-user-tie"></i> Customers
                                        </a>
                                        <a href="#contacts" class="list-group-item list-group-item-action border-0" data-tab="contacts">
                                            <i class="fas fa-address-book"></i> Contacts
                                        </a>
                                        <a href="#employees" class="list-group-item list-group-item-action border-0" data-tab="employees">
                                            <i class="fas fa-users-cog"></i> Employees
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!-- Sales Module -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sales-module">
                                        <i class="fas fa-handshake me-2"></i> Sales
                                    </button>
                                </h2>
                                <div id="sales-module" class="accordion-collapse collapse" data-bs-parent="#navigation-accordion">
                                    <div class="accordion-body p-0">
                                        <a href="#projects" class="list-group-item list-group-item-action border-0" data-tab="projects">
                                            <i class="fas fa-project-diagram"></i> Projects
                                        </a>
                                        <a href="#quotes" class="list-group-item list-group-item-action border-0" data-tab="quotes">
                                            <i class="fas fa-file-invoice"></i> Quotes
                                        </a>
                                        <a href="#tenders" class="list-group-item list-group-item-action border-0" data-tab="tenders">
                                            <i class="fas fa-file-contract"></i> Tenders
                                        </a>
                                        <a href="#orders" class="list-group-item list-group-item-action border-0" data-tab="orders">
                                            <i class="fas fa-shopping-cart"></i> Orders
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!-- Stock Module -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#stock-module">
                                        <i class="fas fa-boxes me-2"></i> Stock
                                    </button>
                                </h2>
                                <div id="stock-module" class="accordion-collapse collapse" data-bs-parent="#navigation-accordion">
                                    <div class="accordion-body p-0">
                                        <a href="#stock-items" class="list-group-item list-group-item-action border-0" data-tab="stock-items">
                                            <i class="fas fa-box"></i> Stock Items
                                        </a>
                                        <a href="#pamir-import" class="list-group-item list-group-item-action border-0" data-tab="pamir-import">
                                            <i class="fas fa-file-import"></i> Pamir Import
                                        </a>
                                        <a href="#formula-engine" class="list-group-item list-group-item-action border-0" data-tab="formula-engine">
                                            <i class="fas fa-calculator"></i> Formula Engine
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!-- CRM Module -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#crm-module">
                                        <i class="fas fa-user-friends me-2"></i> CRM
                                    </button>
                                </h2>
                                <div id="crm-module" class="accordion-collapse collapse" data-bs-parent="#navigation-accordion">
                                    <div class="accordion-body p-0">
                                        <a href="#tasks" class="list-group-item list-group-item-action border-0" data-tab="tasks">
                                            <i class="fas fa-tasks"></i> Tasks
                                        </a>
                                        <a href="#calls" class="list-group-item list-group-item-action border-0" data-tab="calls">
                                            <i class="fas fa-phone"></i> Phone Calls
                                        </a>
                                        <a href="#emails" class="list-group-item list-group-item-action border-0" data-tab="emails">
                                            <i class="fas fa-envelope"></i> Emails
                                        </a>
                                        <a href="#meetings" class="list-group-item list-group-item-action border-0" data-tab="meetings">
                                            <i class="fas fa-calendar-alt"></i> Meetings
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!-- Settings Tables Module -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#settings-module">
                                        <i class="fas fa-table me-2"></i> Settings Tables
                                    </button>
                                </h2>
                                <div id="settings-module" class="accordion-collapse collapse" data-bs-parent="#navigation-accordion">
                                    <div class="accordion-body p-0">
                                        <a href="#uom-table" class="list-group-item list-group-item-action border-0" data-tab="uom-table">
                                            <i class="fas fa-balance-scale"></i> Units of Measure
                                        </a>
                                        <a href="#item-types-table" class="list-group-item list-group-item-action border-0" data-tab="item-types-table">
                                            <i class="fas fa-tags"></i> Item Types
                                        </a>
                                        <a href="#categories-table" class="list-group-item list-group-item-action border-0" data-tab="categories-table">
                                            <i class="fas fa-folder"></i> Categories
                                        </a>
                                        <a href="#company-types-table" class="list-group-item list-group-item-action border-0" data-tab="company-types-table">
                                            <i class="fas fa-building"></i> Company Types
                                        </a>
                                        <a href="#account-types-table" class="list-group-item list-group-item-action border-0" data-tab="account-types-table">
                                            <i class="fas fa-user-tag"></i> Account Types
                                        </a>
                                        <a href="#account-relationships-table" class="list-group-item list-group-item-action border-0" data-tab="account-relationships-table">
                                            <i class="fas fa-link"></i> Account Relationships
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="col-md-9 col-lg-9 col-xl-10">
                <!-- My Dashboard Tab -->
                <div id="my-dashboard" class="tab-content active">
                    <div class="row">
                        <div class="col-md-12">
                            <h2><i class="fas fa-chart-line"></i> My Dashboard</h2>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="card bg-primary text-white">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between">
                                                <div>
                                                    <h4 id="active-projects">0</h4>
                                                    <p>My Projects</p>  
                                                </div>
                                                <i class="fas fa-project-diagram fa-2x"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-success text-white">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between">
                                                <div>
                                                    <h4 id="my-quotes">0</h4>
                                                    <p>My Quotes</p>
                                                </div>
                                                <i class="fas fa-file-invoice fa-2x"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-warning text-white">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between">
                                                <div>
                                                    <h4 id="my-tasks">0</h4>
                                                    <p>Open Tasks</p>
                                                </div>
                                                <i class="fas fa-tasks fa-2x"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card bg-info text-white">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between">
                                                <div>
                                                    <h4 id="pamir-imports">0</h4>
                                                    <p>Imports Today</p>
                                                </div>
                                                <i class="fas fa-download fa-2x"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- My Activities Tab -->
                <div id="my-activities" class="tab-content">
                    <h2><i class="fas fa-tasks"></i> My Activities</h2>
                    <div id="my-activities-content">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h6><i class="fas fa-clock"></i> Today's Tasks</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="text-muted">No tasks scheduled for today</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h6><i class="fas fa-bell"></i> Recent Activity</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="text-muted">No recent activity</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Projects Tab -->
                <div id="projects" class="tab-content">
                    <h2><i class="fas fa-project-diagram"></i> Projects</h2>
                    <div id="projects-content"></div>
                </div>

                <!-- Pamir Import Tab -->
                <div id="pamir-import" class="tab-content">
                    <h2><i class="fas fa-file-import"></i> Pamir Data Import</h2>
                    <div id="pamir-import-content"></div>
                </div>

                <!-- Quote Builder Tab -->
                <div id="quote-builder" class="tab-content">
                    <h2><i class="fas fa-calculator"></i> Enhanced Quote Builder</h2>
                    <div id="quote-builder-content"></div>
                </div>

                <!-- Stock Items Tab -->
                <div id="stock-items" class="tab-content">
                    <h2><i class="fas fa-boxes"></i> Stock Items</h2>
                    <div id="stock-items-content"></div>
                </div>

                <!-- Formula Engine Tab -->
                <div id="formula-engine" class="tab-content">
                    <h2><i class="fas fa-cogs"></i> Formula Engine</h2>
                    <div id="formula-engine-content"></div>
                </div>

                <!-- All other module tabs will be placeholder for now -->
                <div id="customers" class="tab-content">
                    <div id="customers-content"></div>
                </div>

                <div id="contacts" class="tab-content">
                    <h2><i class="fas fa-address-book"></i> Contact Management</h2>
                    <div class="alert alert-info">Contact management module coming soon</div>
                </div>

                <div id="employees" class="tab-content">
                    <h2><i class="fas fa-users-cog"></i> Employee Management</h2>
                    <div class="alert alert-info">Employee management module coming soon</div>
                </div>

                <!-- Settings Tables -->
                <div id="uom-table" class="tab-content">
                    <div id="uom-content"></div>
                </div>
                
                <div id="item-types-table" class="tab-content">
                    <div id="item-types-content"></div>
                </div>
                
                <div id="categories-table" class="tab-content">
                    <div id="categories-content"></div>
                </div>
                
                <div id="company-types-table" class="tab-content">
                    <div id="company-types-content"></div>
                </div>
                
                <div id="account-types-table" class="tab-content">
                    <div id="account-types-content"></div>
                </div>
                
                <div id="account-relationships-table" class="tab-content">
                    <div id="account-relationships-content"></div>
                </div>

                <div id="quotes" class="tab-content">
                    <h2><i class="fas fa-file-invoice"></i> Quote Management</h2>
                    <div id="quote-builder-content"></div>
                </div>

                <div id="tenders" class="tab-content">
                    <h2><i class="fas fa-file-contract"></i> Tender Management</h2>
                    <div class="alert alert-info">Tender management module coming soon</div>
                </div>

                <div id="orders" class="tab-content">
                    <h2><i class="fas fa-shopping-cart"></i> Orders</h2>
                    <div class="alert alert-info">Order management module coming soon</div>
                </div>

                <div id="stock-items" class="tab-content">
                    <div id="stock-items-content"></div>
                </div>

                <div id="tasks" class="tab-content">
                    <h2><i class="fas fa-tasks"></i> Task Management</h2>
                    <div class="alert alert-info">Task management module coming soon</div>
                </div>

                <div id="calls" class="tab-content">
                    <h2><i class="fas fa-phone"></i> Phone Call Log</h2>
                    <div class="alert alert-info">Phone call tracking module coming soon</div>
                </div>

                <div id="emails" class="tab-content">
                    <h2><i class="fas fa-envelope"></i> Email Management</h2>
                    <div class="alert alert-info">Email management module coming soon</div>
                </div>

                <div id="meetings" class="tab-content">
                    <h2><i class="fas fa-calendar-alt"></i> Meeting Management</h2>
                    <div class="alert alert-info">Meeting management module coming soon</div>
                </div>

                <div id="pamir-import" class="tab-content">
                    <h2><i class="fas fa-file-import"></i> Pamir Data Import</h2>
                    <div id="pamir-import-content"></div>
                </div>

                <div id="formula-engine" class="tab-content">
                    <h2><i class="fas fa-calculator"></i> Formula Engine</h2>
                    <div id="formula-engine-content"></div>
                </div>
            </div>

            <!-- Right Settings Panel -->
            <div class="col-md-3 col-lg-3 col-xl-2" id="settings-panel" style="display: none;">
                <div class="card">
                    <div class="card-header bg-secondary text-white d-flex justify-content-between align-items-center">
                        <h6 class="mb-0"><i class="fas fa-cog"></i> Settings</h6>
                        <button class="btn btn-sm btn-outline-light" id="close-settings">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="accordion" id="settings-accordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#user-settings">
                                        <i class="fas fa-user me-2"></i> User Settings
                                    </button>
                                </h2>
                                <div id="user-settings" class="accordion-collapse collapse show" data-bs-parent="#settings-accordion">
                                    <div class="accordion-body">
                                        <div class="mb-3">
                                            <label class="form-label">Display Name</label>
                                            <input type="text" class="form-control form-control-sm" value="John Doe">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Theme</label>
                                            <select class="form-select form-select-sm">
                                                <option>Light</option>
                                                <option>Dark</option>
                                                <option>Auto</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#system-settings">
                                        <i class="fas fa-cogs me-2"></i> System
                                    </button>
                                </h2>
                                <div id="system-settings" class="accordion-collapse collapse" data-bs-parent="#settings-accordion">
                                    <div class="accordion-body">
                                        <div class="mb-3">
                                            <label class="form-label">Default Module</label>
                                            <select class="form-select form-select-sm">
                                                <option>My Dashboard</option>
                                                <option>Projects</option>
                                                <option>My Activities</option>
                                            </select>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="auto-save">
                                            <label class="form-check-label" for="auto-save">
                                                Auto-save work
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#notifications-settings">
                                        <i class="fas fa-bell me-2"></i> Notifications
                                    </button>
                                </h2>
                                <div id="notifications-settings" class="accordion-collapse collapse" data-bs-parent="#settings-accordion">
                                    <div class="accordion-body">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" id="email-notifications" checked>
                                            <label class="form-check-label" for="email-notifications">
                                                Email notifications
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="checkbox" id="task-reminders" checked>
                                            <label class="form-check-label" for="task-reminders">
                                                Task reminders
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="system-alerts">
                                            <label class="form-check-label" for="system-alerts">
                                                System alerts
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div class="modal fade" id="loadingModal" tabindex="-1" data-bs-backdrop="static">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2 mb-0">Processing...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="utils/formula-calculator.js"></script>
    <script src="utils/file-parser.js"></script>
    <script src="api/pamir-parser.js"></script>
    <script src="api/quote-api.js"></script>
    <script src="components/global-search.js"></script>
    <script src="components/project-manager.js"></script>
    <script src="components/pamir-import.js"></script>
    <script src="components/quote-builder.js"></script>
    <script src="components/stock-placeholder.js"></script>
    <script src="components/lookup-field.js"></script>
    <script src="components/interactive-map.js"></script>
    <script src="components/location-picker.js"></script>
    <script src="components/enhanced-location-field.js"></script>
    <script src="components/enhanced-data-grid.js"></script>
    <!-- LEGACY: Archived customer-manager.js - now using modular system -->
    <!-- Original file moved to archive/monolith/components/customer-manager.js -->
    <script src="components/customer-manager.js"></script>

    <script src="components/enhanced-pamir-parser.js"></script>
    <script src="components/template-manager.js"></script>
    <script src="components/formula-engine.js"></script>

    <!-- Modular System Scripts -->
    <script src="src/platform/services/api.js"></script>
    <script src="src/platform/services/db.js"></script>
    <script src="src/platform/services/defaults.js"></script>
    <script src="src/platform/services/pinned.js"></script>
    <script src="src/platform/services/recents.js"></script>
    
    <script src="src/platform/components/DataGrid.jsx"></script>
    <script src="src/platform/components/Lookup.jsx"></script>
    <script src="src/platform/components/LocationField.jsx"></script>
    <script src="src/platform/components/LocationPicker.jsx"></script>
    <script src="src/platform/components/Form.jsx"></script>
    <script src="src/platform/components/SearchBox.jsx"></script>
    <script src="src/platform/components/InteractiveMap.jsx"></script>
    
    <script src="src/modules/products/api.js"></script>
    <script src="src/modules/products/schema.js"></script>
    <script src="src/modules/products/index.jsx"></script>
    <script src="src/modules/products/Details.jsx"></script>
    
    <script src="src/platform/components/CommandRegistry.js"></script>
    <script src="src/platform/components/HeaderBar.jsx"></script>
    <script src="src/layout/AppShellV2.jsx"></script>
    
    <script src="src/layout/Header.jsx"></script>
    <script src="src/layout/Sidebar.jsx"></script>
    <script src="src/app/routes.jsx"></script>
    <script src="src/app/App.jsx"></script>

    <script src="app.js?v=2025-08-09-force"></script>
    
    <!-- Load Google Maps API -->
    <script>
        // Load Google Maps API dynamically with the API key from server
        fetch('/api/google-maps-key')
            .then(response => response.json())
            .then(data => {
                const script = document.createElement('script');
                script.src = `https://maps.googleapis.com/maps/api/js?key=${data.apiKey}&libraries=places&callback=initGoogleMaps`;
                script.async = true;
                script.defer = true;
                document.head.appendChild(script);
            })
            .catch(error => {
                console.error('Failed to load Google Maps API key:', error);
                // Use a placeholder key for development
                const script = document.createElement('script');
                script.src = `https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY_HERE&libraries=places&callback=initGoogleMaps`;
                script.async = true;
                script.defer = true;
                document.head.appendChild(script);
            });
    </script>
</body>
</html>
